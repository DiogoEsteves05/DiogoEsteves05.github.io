<html lang="en">
    <head>
        <!-- Required meta tags -->
        <meta charset="utf-8">
        <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

        <!-- Bootstrap CSS -->
        <link rel="stylesheet" href="bootstrap.css">

        <link rel="stylesheet" href="style.css">

        <title>Robótica</title>
    </head>
    <body>      
        
        <div class="container">

            <div class="row">

                <div class="col-12 my-5">

                    <h1 class="display-3 text-center" style="color:blue">Trabalho de Sistemas Robóticos</h1>
                    </br></br>
                    <p>Este trabalho foi realizado no ambito da disciplina de Sistemas de Robótica, onde foram estudados dois robos.</p>
                    <p> Os robos escolhidos neste projeto foram: </p>
                    <ul>
                        <li>ABB, IRB140, 6DOF, standard_DH (mdl_irb140)</li>
                        <li>generic, planar, dynamics, 2DOF, standard_DH (mdl_twolink)</li>
                    </ul>
                    <p>Desta forma exploramos os pontos pedidos, nomeadamente a Cinemática Direta, Cinemática Inversa, e a Trajetoria dos Robos.</p>
                </div>
            </div> 

            <div class="row">

                <div class="col-3">

                    <nav id="navbarVertical" class="navbar navbar-light bg-light">

                        <nav class="nav nav-pills flex-column">

                            <a class="nav-link my-2" href="#item2">mdl_irb140</a>

                            <nav class="nav nav-pills flex-column">

                                <a class="nav-link ml-3" href="#item2-1">Cinemática Direta</a>

                                <a class="nav-link ml-3" href="#item2-2">Cinemática Inversa</a>

                                <a class="nav-link ml-3" href="#item2-3">Trajetoria</a>

                            <a class="nav-link my-2" href="#item3">mdl_twolink</a>

                            <nav class="nav nav-pills flex-column">

                                <a class="nav-link ml-3" href="#item3-1">Cinemática Direta</a>

                                <a class="nav-link ml-3" href="#item3-2">Cinemática Inversa</a>

                                <a class="nav-link ml-3" href="#item3-3">Trajetoria</a>

                            </nav>                            

                        </nav>

                    </nav>

                </div>

                <div class="col-9">

                    <div data-spy="scroll" data-target="#navbarVertical" data-offset="0" class="scrollspySite">

                        <h4 id="item2">mdl_irb140 (Com 6 graus de liberdade)</h4>
                        <p>Pequeno, poderoso, rápido. É assim que o robo IRB 140 é conhecido.</p>
                        <img src="imagens/ibr140.jpg">
                        <p>Este robo tem 6 eixos é muito compacto e poderoso. É usado industrialmente, movimenta cargas de 6 Quilos, e tem um alcance de 810 mm.</p>
                        <p>Pode ser montando no chão, invertido ou na parede em qualquer ângulo. O design robusto com cabos totalmente integrados aumenta a flexibilidade 
                            geral e a função de detecção de colisão, garantindo assim que o robo seja confiável e seguro.</p>
                        <p>O robo IRB 140 está disponivel em várias versões, e é facil de integrar e adequado para uma variedade de aplicações:</p>
                        <ol>
                            <li>Limpeza/Pulverização</li>
                            <li>Manuseamento de Materiais</li>
                            <li>Embalação</li>
                            <li>Corte</li>
                            <li>Soldagem</li>
                            <li>Montagem</li>
                        </ol>
                        <p><u>Características e Especificações</u></p>
                        <img style="width:250px;" src="imagens/ibr140_caracteristicas1.jpg">
                        <img style="width:250px;" src="imagens/ibr140_caracteristicas2.jpg">
                        <img style="width:250px;" src="imagens/ibr140_caracteristicas3.jpg">
                        </br>
                        </br>
                        <p><u>Desafio Fanta Can - Super Motion Control</u></p>
                        <iframe width="560" height="315" src="https://www.youtube.com/embed/SOESSCXGhFo" title="YouTube video player" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture" allowfullscreen></iframe>
                        </br></br>
                        <h5 id="item2-1">Cinemática Direta</h5>
                        <img src="imagens/irb140_robo.jpg">
                        <div>
                            <pre>
                                <code>
mdl_irb140 % Modelo do Robô
robot = IRB 140 [ABB]:: 6 axis, RRRRRR, stdDH, slowRNE                   
+---+-----------+-----------+-----------+-----------+-----------+
| j |     theta |         d |         a |     alpha |    offset |
+---+-----------+-----------+-----------+-----------+-----------+
|  1|         q1|      0.352|       0.07|    -1.5708|          0|
|  2|         q2|          0|       0.36|          0|          0|
|  3|         q3|          0|          0|     1.5708|          0|
|  4|         q4|       0.38|          0|    -1.5708|          0|
|  5|         q5|          0|          0|     1.5708|          0|
|  6|         q6|          0|          0|          0|          0|
%Cinemática Direta
irb140.fkine(qz);
irb140.fkine(qr);
irb140.fkine(qd);
%Plote
tempo = 0:0.5:10;
q = jtraj(qz, qr, tempo);
irb140.plot(q)
pause(1)
q = jtraj(qr, qd, tempo);
irb140.plot(q)
pause(1)
q = jtraj(qd, qz, tempo);
irb140.plot(q)
pause(1)</code>
                            </pre>
                        </div>
                        <video width="320" height="240" controls>
                            <source src="videos/irb_video1.mp4" type="video/mp4">
                        </video>
                        </br></br>
                        <h5 id="item2-2">Cinemática Inversa</h5>
                        <div><pre><code>
mdl_irb140

robot = 
    
IRB 140 [ABB]:: 6 axis, RRRRRR, stdDH, slowRNE                   
+---+-----------+-----------+-----------+-----------+-----------+
| j |     theta |         d |         a |     alpha |    offset |
+---+-----------+-----------+-----------+-----------+-----------+
|  1|         q1|      0.352|       0.07|    -1.5708|          0|
|  2|         q2|          0|       0.36|          0|          0|
|  3|         q3|          0|          0|     1.5708|          0|
|  4|         q4|       0.38|          0|    -1.5708|          0|
|  5|         q5|          0|          0|     1.5708|          0|
|  6|         q6|          0|          0|          0|          0|

irb140.fkine(qd)

ans = 
0         0         1      0.45
-1         0         0         0
0        -1         0     0.712
0         0         0         1

qi= irb140.ikine(irb140.fkine(qd),[0 0 0],'mask',[1 1 1 0 0 0]);
figure(1);
irb140.teach(qi)
pause(5)
</code></pre></div>
<video width="320" height="240" controls>
    <source src="videos/irb_video2.mp4" type="video/mp4">
</video>
<div><pre><code>
figure(2);
Ta = irb140.fkine(qi)
Ta.print('xyz')
trplot(irb140.fkine(qd), 'color', 'b')
hold on
trplot(Ta, 'color', 'r') %analisar se a pose difere

Ta = 
    0.9985         0    0.0540      0.45
         0         1         0         0
   -0.0540         0    0.9985     0.712
         0         0         0         1
t = (0.45, 0, 0.712), RPY/xyz = (0, 3.1, 0) deg
</code></pre></div>
<video width="320" height="240" controls>
    <source src="videos/irb_video3.mp4" type="video/mp4">
</video>
                        </br></br>
                        <h5 id="item2-3">Trajetória</h5>
                        <div><pre><code>
mdl_irb140

robot = 
IRB 140 [ABB]:: 6 axis, RRRRRR, stdDH, slowRNE                   
+---+-----------+-----------+-----------+-----------+-----------+
| j |     theta |         d |         a |     alpha |    offset |
+---+-----------+-----------+-----------+-----------+-----------+
|  1|         q1|      0.352|       0.07|    -1.5708|          0|
|  2|         q2|          0|       0.36|          0|          0|
|  3|         q3|          0|          0|     1.5708|          0|
|  4|         q4|       0.38|          0|    -1.5708|          0|
|  5|         q5|          0|          0|     1.5708|          0|
|  6|         q6|          0|          0|          0|          0|

%mover o end-effector entre duas poses cartesianas
SE3(0.5, 0.3, 1) * SE3.Rx(pi);
SE3(0.5, -0.3, 1) * SE3.Rx(pi/2);

% os vetores de coordenadas conjuntas associados a essas poses são
q1 = irb140.ikine6s(SE3(0.5, 0.3, 1) * SE3.Rx(pi));
q2 = irb140.ikine6s(SE3(0.5, -0.3, 1) * SE3.Rx(pi/2)); 

%tempo para que a trajetoria ocorra
t = [0:0.04:3]';

q = irb140.jtraj(SE3(0.5, 0.3, 1) * SE3.Rx(pi), SE3(0.5, -0.3, 1) * SE3.Rx(pi/2), t);
figure(1);
irb140.plot(q) %animação da trajetoria
                        </code></pre></div>
                        <video width="320" height="240" controls>
                            <source src="videos/irb_video4.mp4" type="video/mp4">
                        </video>
                        <div><pre><code>
figure(2);
qplot(t, q); %traçar todos os ângulos de junta, em função do tempo
                        </code></pre></div>
                        <img src="imagens/irb140_trajetoria2.jpg">
                        </br></br>
                        <h4 id="item3">mdl_twolink (Com 2 graus de liberdade)</h4>
                        <p>intro</p>
                        </br>
                        </br>
                        </br>
                        </br>
                        </br>
                        </br>
                        <h5 id="item3-1">Cinemática Direta</h5>
                        <img src="imagens/twolink.jpg">
                        <div>
                            <pre>
                                <code>
mdl_twolink
twolink.fkine(qz);
twolink.fkine(qn);
q = jtraj(qz, qn, 0:0.5:10);
twolink.plot(q)
pause(1)
q = jtraj(qn, qz, 0:0.5:10);
twolink.plot(q)
pause(1)
                                </code>
                            </pre>
                        </div>
                        <video width="320" height="240" controls>
                            <source src="videos/twolink video 1.mp4" type="video/mp4">
                        </video>
                        </br></br>      
                        <h5 id="item3-2">Cinemática Inversa</h5>
                        <div>
                            <pre>
                                <code>
mdl_twolink
twolink.fkine(qn)
ans = 
            1         0         0     1.866
            0         0        -1         0
            0         1         0       0.5
            0         0         0         1

q = twolink.ikine(twolink.fkine(qn), [0 0], 'mask',[1 1 0 0 0 0])
figure(1);
twolink.teach(q) %plota o robot com o cotovelo para baixo
pause(3)
                                </code>
                            </pre>
                        </div>
<video width="320" height="240" controls>
    <source src="videos/twolink video 2.mp4" type="video/mp4">
</video>
                        <div>
                            <pre>
                                <code>
figure(2);
Ta = twolink.fkine(q);
Ta.print('xyz')
trplot(twolink.fkine(qn), 'color', 'b')
hold on
trplot(Ta, 'color', 'r') %analisar se a pose difere
q =
    0.0000    0.5236
t = (1.87, 0, 0.5), RPY/xyz = (30, 0, 90) deg
                                </code>
                            </pre>
                        </div>
<video width="320" height="240" controls>
    <source src="videos/twolink video 3.mp4" type="video/mp4">
</video>
                        </br></br>
                        <h5 id="item3-3">Trajetória</h5>
                        <div>
                            <pre>
                                <code>
q0=[0 0];
q1 = [pi/2 0];
t = [0:.06:3];
q = jtraj(q0, q1, t);
figure(1);
twolink.plot(q); 
</code>
</pre>
</div>
<video width="320" height="240" controls>
<source src="videos/twolink video 4.mp4" type="video/mp4">
</video>
<div>
<pre>
<code>
figure(2);
subplot(2,1,1)
plot(t,q(:,1));
<img src="imagens/twolink 1.jpg">
title('Theta');
xlabel('Tempo (s)');
ylabel('Junta 1 (rad)');
subplot(2,1,2)
plot(t,q(:,2));
<img src="imagens/twolink 2.jpg">
title('Theta');
xlabel('Tempo (s)');
ylabel('Junta 2 (rad)');
[q, dq, ddq] = jtraj(q0, q1, t);
figure(3);
subplot(3,1,1)
plot(t,q(:,1)); 
<img src="imagens/twolink 3.jpg">
title('Theta');
xlabel('Tempo(s)');
ylabel('Junta 1 (rad)');
subplot(3,1,2)
plot(t,dq(:,1)); 
<img src="imagens/twolink 4.jpg">
title('Velocidade')
xlabel('Tempo (s)');
ylabel('Junta 1 vel (rad/s)')
subplot(3,1,3)
plot(t,ddq(:,1)); 
<img src="imagens/twolink 5.jpg">
title('Aceleração')
xlabel('Tempo (s)');
ylabel('Junta 1 aceler (rad/s2)')
q = jtraj(q0, q1, t); 
H = fkine(twolink,q); % Matriz transformação homogênea
Hmat = H.double; % Converte SE3 para Matriz
figure(4);
subplot(3,1,1)
s = 'Gráfico da coordenada x variando no tempo';
plot(t,squeeze(Hmat(1,1,:)));
xlabel('Tempo (s)'); ylabel('x (m)'); title(s);
subplot(3,1,2)
s = 'Gráfico da coordenada y variando no tempo';
plot(t,squeeze(Hmat(2,1,:)));
xlabel('Tempo (s)'); ylabel('y (m)'); title(s);
subplot(3,1,3)
s = 'Gráfico da coordenada z variando no tempo';
plot(t,squeeze(Hmat(3,1,:)));
xlabel('Tempo (s)'); ylabel('z (m)'); title(s);
figure(5);
<img src="imagens/s z.jpg">
s = 'Gráfico das coordenadas x e y';
plot(squeeze(Hmat(1,1,:)),squeeze(Hmat(2,1,:)));
xlabel('x (m)'); ylabel('y (m)'); title(s);
<img src="imagens/s xy.jpg">                
                                </code>
                            </pre>
                        </div>
                        </br></br>
                    </div>

                </div>

            </div>

            
        </div>
        </br></br>
        <div class="text-center">
            <h5>Trabalho realizado por:</h5>
                <h5>David Esteves, 30003795, Eng. Informática PL</h5>
                <h5>Diogo Esteves, 30003470, Eng. Informática PL</h5>
            
        </div>
        </br></br>
        <!-- Optional JavaScript; choose one of the two! -->

        <!-- Option 1: jQuery and Bootstrap Bundle (includes Popper)>
        <script src="https://code.jquery.com/jquery-3.5.1.slim.min.js" integrity="sha384-DfXdz2htPH0lsSSs5nCTpuj/zy4C+OGpamoFVy38MVBnE+IbbVYUew+OrCXaRkfj" crossorigin="anonymous"></script>
        <script src="https://cdn.jsdelivr.net/npm/bootstrap@4.5.3/dist/js/bootstrap.bundle.min.js" integrity="sha384-ho+j7jyWK8fNQe+A12Hb8AhRq26LrZ/JpcUGGOn+Y7RsweNrtN/tE3MoK7ZeZDyx" crossorigin="anonymous"></script>
        -->

        <!-- Option 2: jQuery, Popper.js, and Bootstrap JS-->
        <script src="node_modules/jquery/dist/jquery.js"></script>
        <script src="node_modules/popper.js/dist/popper.js"></script>
        <script src="node_modules/bootstrap/dist/js/bootstrap.js"></script>
    
    </body>
</html>
